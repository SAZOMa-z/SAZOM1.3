# pip install -r req.txt
from telebot.types import BotCommand
from pytube import YouTube
from rembg import remove
from PIL import Image
from gtts import gTTS
from googletrans import Translator
from datetime import datetime
from googlesearch import search
from server import SERVER
import speedtest
import moviepy.editor
import telebot
import os
import math
#----------------------------------------------- print
print('-'*50)
print("SAZOM v1.3")
print('-')
def time(now):
    now = datetime.now()
    h = now.strftime("%H")
    m = now.strftime("%M")
    s = now.strftime("%S")
    d = now.strftime("%d")
    m = now.strftime("%m")
    y = now.strftime("%Y")
    d = now.date()
#--------------------------------------------
TOKEN = "7113724596:AAE4yYczuklB_raJ2pi4vObn7BzCUpO9YwE"
bot =  telebot.TeleBot(TOKEN)
Commandss = [
    BotCommand("download","To start downloading videos from YouTube, whatever their type"),
    BotCommand("remove","To remove background"),
    BotCommand("speech","text to speech"),
    BotCommand("convert","convert video to audio"),
    BotCommand("location","phone number location"),
    BotCommand("speed","speed test internet"),
    BotCommand("sticker","To convert image to sticker"),
    BotCommand("trans","Translate any text"),
    BotCommand("search","Search for anything"),
    BotCommand("help","Request help")
]
bot.set_my_commands(Commandss)
#------------------------------------------------------------ folders
DOWNLOADS = "./downloads/"
if os.path.exists(DOWNLOADS):
    print("alredy - [downloads]")
    pass
else:
    os.makedirs("downloads")
    print("creat folder - [downloads]")
TEMP = "./temp/"
if os.path.exists(TEMP):
    print("alredy - [temp]")
    pass
else:
    os.makedirs("temp")
    print("creat folder - [temp]")
PROCESSED = "./processed/"
if os.path.exists(PROCESSED):
    print("alredy - [processed]")
    pass
else:
    os.makedirs("processed")
    print("creat folder - [processed]")
SPEECH = "./speech/"
if os.path.exists(SPEECH):
    print("alredy - [processed]")
    pass
else:
    os.makedirs("speech")
    print("creat folder - [speech]")
CONVERT = "./convert/"
if os.path.exists(CONVERT):
    print("alredy - [convert]")
    pass
else:
    os.makedirs("convert")
    print("creat folder - [convert]")
LOCATION = "./location/"
if os.path.exists(LOCATION):
    print("alredy - [location]")
    pass
else:
    os.makedirs("location")
    print("creat folder - [location]")
STICKER = "./sticker/"
if os.path.exists(STICKER):
    print("alredy - [sticker]")
    pass
else:
    os.makedirs("sticker")
    print("creat folder - [sticker]")
TRANSLATE = "./translate/"
if os.path.exists(TRANSLATE):
    print("alredy - [translate]")
    pass
else:
    os.makedirs("translate")
    print("creat folder - [translate]")
SEARCH = "./search/"
if os.path.exists(SEARCH):
    print("alredy - [search]")
    pass
else:
    os.makedirs("search")
    print("creat folder - [search]")
#-----------------------------------------------------------------
@bot.message_handler(commands=["start"])
def start(message):
    chat_id=message.chat.id
    bot.send_message(chat_id=chat_id,text=f"""
    SAZOM Company
    ------------------------------
     ูุฑุญุจุง ({message.from_user.first_name})
     ูุฐุง ูู ุจูุช ุดุฑูุฉ SAZOM ุงูุฑุณูู ููุงู ุงููุซูุฑ ูู ุงูุฎุฏูุงุช ุงููุฌุงููุฉ ูุงูุชู ุณุชุฌุฏูุง ุนู ุงูุขุฎุฑูู ุจุงูุฏูุน ุงูุฅููุชุฑููู.
ุญุณูุง:
1) ูุง ูู ุดุฑูุฉ SAZOM ุ
ูู ุงููุงูุน SAZOM ูู ุดุฑูุฉ ุจุฑูุฌูุฉ ุธูุฑุช ูู ุงููุชุฑุฉ ุงูุฃุฎูุฑุฉ ููุง ุงููุซูุฑ ูู ุงูุฎุฏูุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุชูุญ ูููุณุชุฎุฏู ุณูููุฉ ุงูุนูู ุจูุงูุฉ ุงูุฎุฏูุงุช ุงููุฌุงููุฉ ุงููุชุงุญุฉ ูุฏู ูุฐู ุงูุดุฑูุฉ.
2) ูุง ุงูุฎุฏูุงุช ุงูุชู ุชูุฏููุง ุงูุดุฑูุฉ ุจุดูู ูุฎุชุตุฑุ
1๏ธโฃ /download ููู ุชุนูู ุชูุฒูู ุฃู ููุฏูู ูู ุงูููุชููุจ ุญุตุฑุง ุจุฃุนูู ุฏูุฉ ููููุฉ
2๏ธโฃ /remove ููู ุชุนูู ุญุฐู ุฎูููุฉ ุฃู ุตูุฑุฉ ุจุงูุฐูุงุก ุงูุฅุตุทูุงุนู ูุนูู: ุงุฐุง ูุงูุช ูุฏูู ุตูุฑุฉ ููุฑุงุฆู ุฎูููุฉ ูุง ุชุฑูุฏูุง ููุท ุงุฑุณููุง ููุจูุช ููู ุณูููู ุจุญุฐู ูุฐู ุงูุฎูููุฉ ูู.
3๏ธโฃ /speech ููู ุชุนูู ุชุญููู ุฃู ูุต ุชูุชุจู ุงูู ููุงู ุจุงููุบุฉ ุงูุนุฑุจูุฉ ูุน ูุฑุงุนุงุฉ ุงูุชุดููู, ูุซูุง: ูุงุฒูู ููุดู ูู ุงูุญุฏููุฉู.
4๏ธโฃ /convert ููู ุชุนูู ุชุญููู ุงูููุฏูู ุงูู ููุณููู, ุฃู: ุฃูุง ูุฏู ููุฏูู ูุฃุฑูุฏ ุชุญูููู ุงูู ููุณููู ูู ูุง ุนููู ูุนูู ููุท ุฅุฑุณุงู ูุฐุง ุงูููุฏูู ุงูู ุจูุช ููู ุณูููู ุจุชุญูููู
5๏ธโฃ /location ูู ุฎุฏูุฉ ุฌุฏูุฏุฉ ููููุฉ ูููู ูู ููุฏ ุงูุชุทููุฑ ููุฑุชูุง ุจุจุณุงุทุฉ ุฃููุง ุชุณุชุทูุน ูู ุฎูุงู ุงูุฑูู ุงูุฐู ุชุฑุณูู ููุง ูุนุฑูุฉ ุงุณู ุงูุฏููุฉ ูุซูุง: +963 ุณุชุนุฑู ูุจุงุดุฑุฉ ุฃููุง ูุฏููุฉ ุณูุฑูุง ูุชุนุฑู ุฃูุถุง ุงุณู ุงูุดุฑูุฉ ุงูุตุงูุนุฉ ูุซูุง: 51****** ูุฐู ูุดุฑูุฉ MTN ููู ุฎูุงู ูุฐู ุงููุนูููุงุช ุชุฃุฎุฐ ุฅุญุฏุงุซูุงุช ูุฐุง ุงูุฑูู ูุนูุฏูุง ุชุฑุณู ููู ุจูุงุญูุฉ HTML ูุชุนุฑู ููุงู ุตุงุญุจ ูุฐุง ุงูุฑูู. ูููู ููุฃุณู ุงูุดุฏูุฏ ูุฐู ุงูุฎุฏูุฉ ููุฏ ุงูุชุทููุฑ ูุณูุชู ุชุดุบูููุง ูุฑูุจุง
6๏ธโฃ /speed ููู ุชุนูู Speed Test Internet ูุนูู ููุงุณ ุณุฑุนุฉ ุงูุงูุชุฑูุช ูุฏูู.
7๏ธโฃ /sticker ููู ุชุนูู ุชุญููู ุตูุฑุฉ ุชุฑุณููุง ููุจูุช ุงูู ููุตู.
8๏ธโฃ /trans ููู ุชุนูู ุชุฑุฌูุฉ ุฃู ูุต ุฅูู ุงููุบุฉ ุงูุนุฑุจูุฉ
9๏ธโฃ /search ููู ุชุนูู ุจุญุซ ุนู ุฃู ุดูุก ูู ูุญุฑู ุงูุจุญุซ ุฌูุฌู ุจูุฌุฑุจ ูุง ุฅู ุชุจุญุซ ุนู ุฃู ุดูุก ุณูุธูุฑ ูู ุฑุงุจุท ุจู ุงูุดูุก ุงูุฐู ุจุญุซุช ุนูู

ููุงุญุธุฉ:๐ ูู ูุฐู ุงูุฎุฏูุงุช ุชุญุงูุธ ุนูู ุฎุตูุตูุฉ ุงููุณุชุฎุฏู ุจูุฌุฑุฏ ูุง ุฅู ุชูุชูู ุงู function ูู ุงูุนูู ุชุญุฐู ูู ุงููุณุงุฆุท ูุงูุฑุณุงุฆู ุงูุชู ุญูุธุช ุจุงูุจูุช ูู ุฃุฌู ุงูุงุณุชุฎุฏุงู ูุงููุนุงูุฌุฉ.
ููุงุญุธุฉ2: ๐ ุงูุจูุช ูู ุญุงูุฉ ุชุทููุฑ ุฏุงุฆูุฉ ูุฐูู ูุชููู ููุฏุฉ ูุง ุชุชุฌุงูุฒ ุงู 8 ุณุงุนุงุช ููุชุทููุฑ ููุง ุชููู ุณูุชู ุฅุนูุงู ุงููุณุชุฎุฏููู ุจุงูููุช ุงูุฐู ุณูุชู ุฅุทูุงุก ุงูุจูุช ููู.
ุนูููุง: ุฃุฑุฌู ุงูุงุณุชูุงุฏุฉ ูู ูุฐุง ุงูุจูุช ููุดุฑู ูุฃูุจุฑ ูุฏุฑ ูู ุงููุณุชุฎุฏููู ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู โค๏ธโ๐ฉน๐ฏ
ุฅุฐุง ุฃุฑุฏุช ุงูุชูุงุตู ูุน ุงููุจุฑูุฌูู ๐จ๐ฉ:
Alaa Safi ุนูุงุก ุตุงูู 
@AlaaSafiProgrammer218 
+96395144936
___________________________________

Zaid Makhzoom  ุฒูุฏ ูุฎุฒูู
@Zaidmakhzoom
+963 992 883 477
""")
    bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
    bot.send_message(chat_id="6020331913",text=f"""
        New User!
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
    """)
    bot.send_message(chat_id="6618502081",text=f"""
        New User!
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
    """)
@bot.message_handler(commands=["help"])
def help(message):
    chat_id=message.chat.id
    bot.send_message(chat_id=chat_id,text="""
     ูุฐุง ูู ุจูุช ุดุฑูุฉ SAZOM ุงูุฑุณูู ููุงู ุงููุซูุฑ ูู ุงูุฎุฏูุงุช ุงููุฌุงููุฉ ูุงูุชู ุณุชุฌุฏูุง ุนู ุงูุขุฎุฑูู ุจุงูุฏูุน ุงูุฅููุชุฑููู.
ุญุณูุง:
1) ูุง ูู ุดุฑูุฉ SAZOM ุ
ูู ุงููุงูุน SAZOM ูู ุดุฑูุฉ ุจุฑูุฌูุฉ ุธูุฑุช ูู ุงููุชุฑุฉ ุงูุฃุฎูุฑุฉ ููุง ุงููุซูุฑ ูู ุงูุฎุฏูุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุชูุญ ูููุณุชุฎุฏู ุณูููุฉ ุงูุนูู ุจูุงูุฉ ุงูุฎุฏูุงุช ุงููุฌุงููุฉ ุงููุชุงุญุฉ ูุฏู ูุฐู ุงูุดุฑูุฉ.
2) ูุง ุงูุฎุฏูุงุช ุงูุชู ุชูุฏููุง ุงูุดุฑูุฉ ุจุดูู ูุฎุชุตุฑุ
1๏ธโฃ /download ููู ุชุนูู ุชูุฒูู ุฃู ููุฏูู ูู ุงูููุชููุจ ุญุตุฑุง ุจุฃุนูู ุฏูุฉ ููููุฉ
2๏ธโฃ /remove ููู ุชุนูู ุญุฐู ุฎูููุฉ ุฃู ุตูุฑุฉ ุจุงูุฐูุงุก ุงูุฅุตุทูุงุนู ูุนูู: ุงุฐุง ูุงูุช ูุฏูู ุตูุฑุฉ ููุฑุงุฆู ุฎูููุฉ ูุง ุชุฑูุฏูุง ููุท ุงุฑุณููุง ููุจูุช ููู ุณูููู ุจุญุฐู ูุฐู ุงูุฎูููุฉ ูู.
3๏ธโฃ /speech ููู ุชุนูู ุชุญููู ุฃู ูุต ุชูุชุจู ุงูู ููุงู ุจุงููุบุฉ ุงูุนุฑุจูุฉ ูุน ูุฑุงุนุงุฉ ุงูุชุดููู, ูุซูุง: ูุงุฒูู ููุดู ูู ุงูุญุฏููุฉู.
4๏ธโฃ /convert ููู ุชุนูู ุชุญููู ุงูููุฏูู ุงูู ููุณููู, ุฃู: ุฃูุง ูุฏู ููุฏูู ูุฃุฑูุฏ ุชุญูููู ุงูู ููุณููู ูู ูุง ุนููู ูุนูู ููุท ุฅุฑุณุงู ูุฐุง ุงูููุฏูู ุงูู ุจูุช ููู ุณูููู ุจุชุญูููู
5๏ธโฃ /location ูู ุฎุฏูุฉ ุฌุฏูุฏุฉ ููููุฉ ูููู ูู ููุฏ ุงูุชุทููุฑ ููุฑุชูุง ุจุจุณุงุทุฉ ุฃููุง ุชุณุชุทูุน ูู ุฎูุงู ุงูุฑูู ุงูุฐู ุชุฑุณูู ููุง ูุนุฑูุฉ ุงุณู ุงูุฏููุฉ ูุซูุง: +963 ุณุชุนุฑู ูุจุงุดุฑุฉ ุฃููุง ูุฏููุฉ ุณูุฑูุง ูุชุนุฑู ุฃูุถุง ุงุณู ุงูุดุฑูุฉ ุงูุตุงูุนุฉ ูุซูุง: 51****** ูุฐู ูุดุฑูุฉ MTN ููู ุฎูุงู ูุฐู ุงููุนูููุงุช ุชุฃุฎุฐ ุฅุญุฏุงุซูุงุช ูุฐุง ุงูุฑูู ูุนูุฏูุง ุชุฑุณู ููู ุจูุงุญูุฉ HTML ูุชุนุฑู ููุงู ุตุงุญุจ ูุฐุง ุงูุฑูู. ูููู ููุฃุณู ุงูุดุฏูุฏ ูุฐู ุงูุฎุฏูุฉ ููุฏ ุงูุชุทููุฑ ูุณูุชู ุชุดุบูููุง ูุฑูุจุง
6๏ธโฃ /speed ููู ุชุนูู Speed Test Internet ูุนูู ููุงุณ ุณุฑุนุฉ ุงูุงูุชุฑูุช ูุฏูู.
7๏ธโฃ /sticker ููู ุชุนูู ุชุญููู ุตูุฑุฉ ุชุฑุณููุง ููุจูุช ุงูู ููุตู.
8๏ธโฃ /trans ููู ุชุนูู ุชุฑุฌูุฉ ุฃู ูุต ุฅูู ุงููุบุฉ ุงูุนุฑุจูุฉ
9๏ธโฃ /search ููู ุชุนูู ุจุญุซ ุนู ุฃู ุดูุก ูู ูุญุฑู ุงูุจุญุซ ุฌูุฌู ุจูุฌุฑุจ ูุง ุฅู ุชุจุญุซ ุนู ุฃู ุดูุก ุณูุธูุฑ ูู ุฑุงุจุท ุจู ุงูุดูุก ุงูุฐู ุจุญุซุช ุนูู

ููุงุญุธุฉ:๐ ูู ูุฐู ุงูุฎุฏูุงุช ุชุญุงูุธ ุนูู ุฎุตูุตูุฉ ุงููุณุชุฎุฏู ุจูุฌุฑุฏ ูุง ุฅู ุชูุชูู ุงู function ูู ุงูุนูู ุชุญุฐู ูู ุงููุณุงุฆุท ูุงูุฑุณุงุฆู ุงูุชู ุญูุธุช ุจุงูุจูุช ูู ุฃุฌู ุงูุงุณุชุฎุฏุงู ูุงููุนุงูุฌุฉ.
ููุงุญุธุฉ2: ๐ ุงูุจูุช ูู ุญุงูุฉ ุชุทููุฑ ุฏุงุฆูุฉ ูุฐูู ูุชููู ููุฏุฉ ูุง ุชุชุฌุงูุฒ ุงู 8 ุณุงุนุงุช ููุชุทููุฑ ููุง ุชููู ุณูุชู ุฅุนูุงู ุงููุณุชุฎุฏููู ุจุงูููุช ุงูุฐู ุณูุชู ุฅุทูุงุก ุงูุจูุช ููู.
ุนูููุง: ุฃุฑุฌู ุงูุงุณุชูุงุฏุฉ ูู ูุฐุง ุงูุจูุช ููุดุฑู ูุฃูุจุฑ ูุฏุฑ ูู ุงููุณุชุฎุฏููู ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู โค๏ธโ๐ฉน๐ฏ
ุฅุฐุง ุฃุฑุฏุช ุงูุชูุงุตู ูุน ุงููุจุฑูุฌูู ๐จ๐ฉ:
Alaa Safi ุนูุงุก ุตุงูู 
@AlaaSafiProgrammer218 
+96395144936
___________________________________

Zaid Makhzoom  ุฒูุฏ ูุฎุฒูู
@Zaidmakhzoom
+963 992 883 477
""")
    bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
    bot.send_message(chat_id="6020331913",text=f"""
        Asking a Help!
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
    """)
    bot.send_message(chat_id="6618502081",text=f"""
        Asking a Help!
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
    """)
    
#--------------------------------------------------------------- download func
@bot.message_handler(commands=["download"])
def start_down(message):
    chat_id=message.chat.id
    defdown=bot.send_message(chat_id=chat_id,text=f"ุฃููุง ุจู ูุง {message.from_user.first_name} ูู ุฎุฏูุฉ ุชูุฒูู ุงูููุฏูู ูู ุงูููุชููุจ ุจุฃุนูู ุฏูุฉ, ูู ูุง ุนููู ูุนูู ูู ุฃู ุชุฑุณู ูู ุงูุฑุงุจุท")
    bot.register_next_step_handler(defdown,download_sazom)
def download_sazom(message):
    try:
        chat_id=message.chat.id
        url = message.text
        yt = YouTube(url)
        bot.send_message(chat_id=chat_id,text=f"ูุญู ูููู ุจุชูุฒูู ุงูููุฏูู ุงูุฎุงุต ุจู ('''{yt.title}''')(720p) ุงูุฑุฌุงุก ุงูุฅุชุธุงุฑ...")
        video = yt.streams.get_highest_resolution()
        filename = f"./downloads/SAZOM.mp4"
        video.download(filename=filename)
        mediadownload = open("./downloads/SAZOM.mp4",'rb')
        bot.send_video(chat_id=chat_id,video=mediadownload)
        bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
        mediadownload.close()
        os.remove("./downloads/SAZOM.mp4")
        bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
        bot.send_message(chat_id="6020331913",text=f"""
        [Download Youtube Video]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Download Youtube Video]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    except Exception as e:
        bot.reply_to(message, "ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
        [Download Youtube Video]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Download Youtube Video]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    
#---------------------------------------------------------- Remove Background Image func
@bot.message_handler(commands=["remove"])
def remove_sazom(message):
    chat_id=message.chat.id
    defremove=bot.send_message(chat_id=chat_id,text=f"ุฃููุง {message.from_user.first_name} ุงูุฑุฌุงุก ุฅุฑุณุงู ุงูุตูุฑุฉ ุงููุฑุงุฏ ุญุฐู ุฎูููุชูุง")
    bot.register_next_step_handler(defremove,handle_photo)
def handle_photo(message):
    chat_id=message.chat.id
    try:
        photo = message.photo[-1]
        file_id = photo.file_id
        bot.send_message(chat_id=chat_id,text="ูุญู ูููู ุจูุนุงูุฌุฉ ุงูุตูุฑุฉ. ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ...")
        file_info = bot.get_file(file_id)
        file_path = file_info.file_path
        save_path = "temp/SAZOM.jpg"
        downloaded_file = bot.download_file(file_path)
        with open(save_path, 'wb') as new_file:
            new_file.write(downloaded_file)
        input_path = "./temp/SAZOM.jpg"
        output_path = "./processed/SAZOM.png"
        input = Image.open(input_path)
        output = remove(input)
        output.save(output_path)
        os.remove("./temp/SAZOM.jpg")
        mediarembg = open("./processed/SAZOM.png",'rb')
        bot.send_photo(chat_id=chat_id,photo=mediarembg)
        bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
        mediarembg.close()
        os.remove("./processed/SAZOM.png")
        bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
        bot.send_message(chat_id="6020331913",text=f"""
        [Remove Background]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Remove Background]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    except Exception as e:
        bot.reply_to(message, "ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
        [Remove Background]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Remove Background]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
#-------------------------------------------------------text to speech
@bot.message_handler(commands=["speech"])
def speech_sazom(message):
    chat_id = message.chat.id
    speech = bot.send_message(chat_id=chat_id,text=f"ุฃููุง ุจู {message.from_user.first_name} ุงูุฑุฌุงุก ูุชุงุจุฉ ุงููุต ุงููุฑุงุฏ ุชุญูููู ุงูู ุตูุช")
    bot.register_next_step_handler(speech,text_to_speech)
def text_to_speech(message):
    try:
        chat_id = message.chat.id
        text = message.text
        bot.send_message(chat_id=chat_id,text="ูุญู ูููู ุจูุนุงูุฌุฉ ุงููุต ุงูุฐู ูุชุจุชู. ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ...")
        tts = gTTS(text=text, lang='ar', slow=False)
        tts.save("./speech/SAZOM.mp3")
        mediaspeech = open("./speech/SAZOM.mp3","rb")
        bot.send_audio(chat_id=chat_id,audio=mediaspeech)
        bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
        mediaspeech.close()
        os.remove("./speech/SAZOM.mp3")
        bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
        bot.send_message(chat_id="6020331913",text=f"""
        [Speech]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Speech]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    except Exception as e:
        bot.reply_to(message, "ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
        [Speech]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Speech]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)

#----------------------------------------------------mp4 to mp3
@bot.message_handler(commands=["convert"])
def conver_welc(message):
    chat_id=message.chat.id
    defconvert=bot.send_message(chat_id=chat_id,text=f"ุฃููุง ุจู {message.from_user.first_name} ุงูุฑุฌุงุก ุงุฑุณุงู ุงูููุฏูู ุงูุฐู ุชุฑูุฏ ุชุญูููู ุงูู ููุณููู")
    bot.register_next_step_handler(defconvert,convert_sazom)
def convert_sazom(message):
    try:
        chat_id=message.chat.id
        video = message.video
        file_id = video.file_id
        file_info = bot.get_file(file_id)
        file_path = file_info.file_path
        save_path = "convert/SAZOM.mp4"
        downloaded_file = bot.download_file(file_path)
        with open(save_path, 'wb') as new_file:
            new_file.write(downloaded_file)
        bot.send_message(chat_id=chat_id,text="ูุญู ูููู ุจูุนุงูุฌุฉ ุงูููุฏููุงูุฐู ุงุฑุณูุชู. ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ...")
        input= "./convert/SAZOM.mp4"
        mp4 = moviepy.editor.VideoFileClip(input)
        mp3 = mp4.audio
        mp3.write_audiofile("./convert/SAZOM.mp3")
        mediaconvert=open("./convert/SAZOM.mp3",'rb')
        bot.send_audio(chat_id=chat_id,audio=mediaconvert)
        bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
        mediaconvert.close()
        mp4.close()
        os.remove("./convert/SAZOM.mp3")
        os.remove("./convert/SAZOM.mp4")
        bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
        bot.send_message(chat_id="6020331913",text=f"""
        [Convert]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Convert]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    except Exception as e:
        bot.reply_to(message, text="ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
        [Convert]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Convert]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
#---------------------------------------------------------- phone number location
@bot.message_handler(commands=["location"])
def location(message):
    bot.reply_to(message,text="ุนุฐุฑุง ูุฐู ุงูุฎุฏูุฉ ููุฏ ุงูุชุทููุฑ ุญุงููุง ุณูุชู ุฅุถุงูุชูุง ุจุฃูุฑุจ ููุช ูููู ูุณูุชู ุฅุนูุงู ุฌููุน ุงููุณุชุฎุฏููู.")
    bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
    bot.send_message(chat_id="6020331913",text=f"""
        [Location Number]: - Asking This Service
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    bot.send_message(chat_id="6618502081",text=f"""
        [Location Number]: - Asking This Service
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
#------------------------------------------- speed test
@bot.message_handler(commands=["speed"])
def speed_welc(message):
    chat_id=message.chat.id
    defspeed=bot.send_message(chat_id=chat_id,text="ูุญู ูููู ุจููุงุณ ุณุฑุนุฉ ุงูุฅูุชุฑูุช ูุฏูู, ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ ูุฏ ูุณุชุบุคู ูุฐุง ุจุถุน ุฏูุงุฆู...")
    bot.register_next_step_handler(defspeed,speed_sazom)
def speed_sazom(message):
    try:
        chat_id=message.chat.id
        sp = speedtest.Speedtest()
        def bytes_to_mb(size_bytes):
            i = int(math.floor(math.log(size_bytes,1024)))
            power = math.pow(1024,i)
            size = round(size_bytes / power,2)
            return f"{size} Mpbs"
        down = sp.download()
        up = sp.upload()
        server = []
        sp.get_servers(server)
        bot.send_message(chat_id=chat_id,text=f"""
            
                                -------------------------
            Download: {bytes_to_mb(down)}
            -------------------------
            Upload: {bytes_to_mb(up)}
            -------------------------
            Ping: {sp.results.ping}
        """)
        bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
        bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
        bot.send_message(chat_id="6020331913",text=f"""
        [Speed Test Internet]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Speed Test Internet]: - Done Using
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
    except Exception as e:
        bot.reply_to(message, text="ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
        [Speed Test Internet]: - Falid is((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Speed Test Internet]: - Falid is((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
#--------------------------------------------------- image to sticker
@bot.message_handler(commands=["sticker"])
def sticker_welc(message):
    chat_id=message.chat.id
    defsticker=bot.send_message(chat_id=chat_id,text=f"ุงููุง ุจู {message.from_user.first_name} ุงูุฑุฌุงุก ุงุฑุณุงู ุงูุตูุฑุฉ ุงููุฑุงุฏ ุชุญููููุง ุงูู ููุตู.")
    bot.register_next_step_handler(defsticker,sticker_sazom)
def convert_to_sticker(image_path):
    try:
        input_image = Image.open(image_path)
        sticker_size = (512, 512)
        input_image.thumbnail(sticker_size)
        if input_image.size[0] != sticker_size[0] or input_image.size[1] != sticker_size[1]:
            background = Image.new('RGBA', sticker_size, (255, 255, 255, 0))
            background.paste(input_image, ((sticker_size[0] - input_image.size[0]) // 2, (sticker_size[1] - input_image.size[1]) // 2))
            input_image = background
        sticker_path = './sticker/SAZOM.webp'
        input_image.save(sticker_path)
        return sticker_path
    except Exception as e:
        print("ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
def sticker_sazom(message):
    try:
        file_id = message.photo[-1].file_id
        chat_id=message.chat.id
        file_info = bot.get_file(file_id)
        downloaded_file = bot.download_file(file_info.file_path)
        bot.send_message(chat_id=chat_id,text="ูุญู ูููู ุจูุนุงูุฌุฉ ุงูุตูุฑุฉ ุงูุชู ุงุฑุณูุชูุง , ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ...")
        with open('./sticker/SAZOM.jpg', 'wb') as new_file:
            new_file.write(downloaded_file)
        sticker_path = convert_to_sticker('./sticker/SAZOM.jpg')
        if sticker_path:
            sticker_file = open(sticker_path, 'rb')
            bot.send_sticker(message.chat.id, sticker_file)
            bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
            sticker_file.close()
            os.remove("./sticker/SAZOM.jpg")
            os.remove("./sticker/SAZOM.webp")
            bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
            bot.send_message(chat_id="6020331913",text=f"""
            [Sticker]: - Done Using
            Name: {message.from_user.first_name}
            ID User: {message.from_user.id}
            {datetime.now()}
            """)
            bot.send_message(chat_id="6618502081",text=f"""
            [Sticker]: - Done Using
            Name: {message.from_user.first_name}
            ID User: {message.from_user.id}
            {datetime.now()}
            """)
        else:
            bot.send_message(message.chat.id, "ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
    except Exception as e:
        bot.reply_to(message,text="ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
        [Sticker]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
        bot.send_message(chat_id="6618502081",text=f"""
        [Sticker]: - Falid is ((({e})))
        Name: {message.from_user.first_name}
        ID User: {message.from_user.id}
        {datetime.now()}
        """)
#-------------------------------------------------- Translate
@bot.message_handler(commands=["trans"])
def tran_welc(message):
    chat_id = message.chat.id
    deftrans = bot.send_message(chat_id=chat_id,text=f"ุฃููุง ุจู {message.from_user.first_name}. ุงูุฑุฌุงุก ุฅุฑุณุงู ุฃู ูุต ุชุฑูุฏ ุชุฑุฌูุชู ูู ุฃู ูุบุฉ ุฅูู ุงูุนุฑุจูุฉ")
    bot.register_next_step_handler(deftrans,sazom_trans)
def sazom_trans(message):
    try:
        chat_id=message.chat.id
        translator = Translator()
        with open("./translate/SAZOM.txt",'w',encoding="utf-8") as file:
            file.write(message.text)
        bot.send_message(chat_id=chat_id,text="ูุญู ูููู ุจูุนุงูุฌุฉ ุงููุต ุงูุฐู ุงุฑุณูุชู, ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ...")
        with open("./translate/SAZOM.txt","r",encoding="utf-8") as file:
            SAZOM_file = file.read()
        SAZOM_ar = translator.translate(text=SAZOM_file,src="auto",dest="ar").text
        with open("./translate/SAZOM_ar.txt","w", encoding="utf-8") as file:
            file.write(SAZOM_ar)
        text = open("./translate/SAZOM_ar.txt","rb")
        bot.send_message(chat_id=chat_id,text=text)
        bot.send_message(chat_id=chat_id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
        text.close()
        os.remove("./translate/SAZOM_ar.txt")
        os.remove("./translate/SAZOM.txt")
        bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
        bot.send_message(chat_id="6020331913",text=f"""
            [Translate]: - Done Using
            Name: {message.from_user.first_name}
            ID User: {message.from_user.id}
            {datetime.now()}
            """)
        bot.send_message(chat_id="6618502081",text=f"""
            [Translate]: - Done Using
            Name: {message.from_user.first_name}
            ID User: {message.from_user.id}
            {datetime.now()}
            """)
    except Exception as e:
        bot.reply_to(message,text="ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
        bot.send_message(chat_id="6020331913",text=f"""
            [Translate]: - Falid is: ((({e})))
            Name: {message.from_user.first_name}
            ID User: {message.from_user.id}
            {datetime.now()}
            """)
        bot.send_message(chat_id="6618502081",text=f"""
            [Translate]: - Falid is: ((({e})))
            Name: {message.from_user.first_name}
            ID User: {message.from_user.id}
            {datetime.now()}
            """)
#--------------------------------------------- search
@bot.message_handler(commands=["search"])
def search_welc(message):
    defsearch = bot.send_message(message.chat.id,text=f"ุฃููุง ุจู {message.from_user.first_name}. ููุจุญุซ ุนูู ุฃู ุดูุก ูู ูุญุฑูุงุช ุงูุจุญุซ ุฌูุฌู ููุท ุฃุฑุณู ุงูุฐู ุชุฑูุฏ ูุชุงุจุชู ูู ุฌูุฌู")
    bot.register_next_step_handler(defsearch,sazom_search)
def sazom_search(message):
    with open("./search/SAZOM.txt","w",encoding="utf-8") as file:
        bot.send_message(message.chat.id,text="ูุญู ูููู ุจูุนุงูุฌุฉ ุงููุต ุงูุฐู ูุชุจุชู, ุงูุฑุฌุงุก ุงูุฅูุชุธุงุฑ...")
        try:
            query =message.text
            search_results = search(query,num_results=10)
            for result in search_results:
                file.write(result + '\n')
            file.close()
            searched = open("./search/SAZOM.txt","rb")
            bot.send_message(message.chat.id,text=searched)
            bot.send_message(message.chat.id,text="ุดูุฑุง ูุงุณุชุฎุฏุงูู ูุฐุง ุงูุจูุช, ุฃุฑุฌู ุฃู ูููู ูุฏ ูุงู ุฅุนุฌุงุจู, ููููู ุฏุนููุง ุจุฃู ุชูุดุฑ ูุฐุง ุงูุจูุช ุนูู ุงูุฃูู ูุฃุตุฏูุงุฆู ๐ฏ๐ฏ")
            bot.send_message(message.chat.id,text=f"""
                ูุขุฎุฑ ุชุญุฏูุซ ุญุตู ูู:
                Day: 17
                Month: 04
                Year: 24
                Hour: 23
                Min: 05
                Sec: 53
                datetime: 2024-04-17 23:05:53.021730
                ุชูุช ุฅุถุงูุฉ ุฎุงุตูุฉ ุงูุจุญุซ ูู ุฌูุฌู ๐                 
            """)
            searched.close()
            os.remove("./search/SAZOM.txt")
        except Exception as e:
            bot.reply_to(message,text="ุนุฐุฑุง ููุงู ุฎุทุฃ ูุง, ุงูุฑุฌุงุก ุฅุนุงุฏุฉ ุงููุญุงููุฉ.")
#--------------------------------------------- start
print('-'*50)
print("The Bot is Running in v1.3...!")
SERVER()
bot.infinity_polling()
